**Лабораторная работа №2**
==========================
*Задание 1 (Установка ОС и настройка LVM, RAID)*
-------------------------------------------------
1. Я создаю виртуальную машину, выдав ей следующие характеристики: 

* 1 gb ram
* 1 cpu
* 2 hdd - ssd1 и ssd2, с равным размером и возможностью горячей замены
* SATA контроллер настроен на 4 порта

![изображение 1](images/1.1.jpg)

2. Далее нужно добавить и настроить RAID и LVM, чтобы конечный результат получился таким:

![изображение 2](images/1.2.jpg)

3. Устанавливаем  grub на первое устройство, загружаем систему и копируем раздел /boot с sda на sdb, с помощью `dd if=/dev/sda1 of=/dev/sdb1`:

![изображение 3](images/1.3.jpg)

4. Просматриваем диски в системе `lsblk`, получается два hdd диска - sda и sdb:

![изображение 5](images/5.jpg)

5. Устанавливаем grub на второе устройство `grub-install /dev/sdb` и с помощью `cat /proc/mdstat` просматриваем, что RAID-массив проинициализирован корректно, так как в этом файле отражается его текущее состояние:
![изображение 4](images/4.jpg)

Также с помощью некоторых команд можно узнать: 
* pvs - информацию о физическом томе;
* lvs - информацию о логическом томе;
* vgs - информацию о группе физических томов;
* mount - просмотр примонтированных устройств.

***Результат проделанного задания - я создала виртуальную машину с двумя дисками, настроила LVM и RAID.***



Задание 2 (Эмуляция отказа одного из дисков)
--------------------------------------------

1. Так как я поставила галочку в hot swap, то мне доступно удаление дисков на лету. Поэтому я удаляю диск ssd1 из свойств машины и все файлы связанные с ним (ssd1.vmdk). С помощью перезагрузки нужно убедиться, что все работает. 

2. Проверяю статус RAID-массива при помощи `cat /proc/mdstat`:
![изображение2.1](images/2.1.jpg)

3. Добавляю новый диск ssd3 такого же размера.
![изображение2.8](images/2.8.jpg)

4. С помощью команды `fdisk -l` проверяю, что новый диск приехал:
![изображение 2.2](images/2.2.jpg)

5. Копирую таблицу разделов со старого диска на новый при помощи  `sfdisk -d /dev/sda | sfdisk /dev/sdb`:
![изображение 2.3](images/2.3.jpg)

6. Просматриваю результат при помощи команды fdisk -l:
![изображение 2.4](images/2.4.jpg)

7. Добавляю в RAID-массив новый диск при помощи  `mdadm -manage /dev/md0 -add /dev/sdb` и просматриваю результат  `cat /proc/mdstat`:
![изображение 2.5](images/2.5.jpg)

8. Теперь я вручную выполняю синхронизацию разделов, которые не входят в RAID. Для этого я использую утилиту dd, которая выполняет копирование данных из одного места в другое. Копируем с "живого" диска на новый.  `dd if=/dev/sda1 of=/dev/sdb1`:
![изображение 2.6](images/2.6.jpg)

9. Выполняю перезагрузку, чтобы убедиться, что все работает.

***Результат проделанного задания - я проэмулировала отказ одного из дисков, сохранила диск ssd2 и добавила новый диск ssd3***
